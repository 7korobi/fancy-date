{"version":3,"sources":["webpack://VuePetitStore/webpack/universalModuleDefinition","webpack://VuePetitStore/webpack/bootstrap","webpack://VuePetitStore/./src/struct.coffee","webpack://VuePetitStore/external \"lodash\"","webpack://VuePetitStore/external \"memory-orm\"","webpack://VuePetitStore/external \"tiny-cookie\"","webpack://VuePetitStore/./src/index.coffee","webpack://VuePetitStore/./src/uri.coffee","webpack://VuePetitStore/./src/storage.coffee","webpack://VuePetitStore/./src/firebase.coffee","webpack://VuePetitStore/external \"firebase\"","webpack://VuePetitStore/./src/vuex.coffee","webpack://VuePetitStore/./src/device.coffee","webpack://VuePetitStore/./src/poll.coffee","webpack://VuePetitStore/external \"dexie\"","webpack://VuePetitStore/./src/path.coffee"],"names":["root","factory","exports","module","define","amd","global","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_","nine_hour","relative_to","timezone","to_msec","to_sec","to_tempo","to_x","params","query","hash","is_replace","to","val","cloneDeep","type","sp","nil","u","constructor","str","timeout","replace","num","unit","Number","Error","timestr","since","gap","next_at","now_idx","write_at","Date","last_at","parseInt","types","[object Object]","to_str","String","by_str","by_url","Array","JSON","stringify","parse","require","Cookie","baseState","test","set","expres","remove","window","localStorage","setItem","removeItem","sessionStorage","history","error","console","warn","change_url","id","default_id","type_id","created","this","mounted","newVal","$route","beforeRouteUpdate","newRoute","oldRoute","next","watch","href","location","$router","resolve","replaceState","pushState","getItem","handle_id","newValue","addEventListener","beforeDestroy","removeEventListener","cookie","options","expires","Mem","firebase","firestore","firestore_base","joinSnapshot","store","settings","target","shot","eject","gate","log","onSnapshot","path","chk","del","add","snap","add_id","chk_id","comp","del_id","join","join_id","join_target","path_id","query_id","snap_id","snapshot","_firestore","assign","data","step","State","methods","computed","firestore_models","set_key","slice","_id","ref","doc","delete","merge","collection","qs","docChanges","forEach","newIndex","oldIndex","Set","firestore_model","firestore_collection","firestore_doc","exists","vuex_read","opt","dir","on","split","$store","state","vuex","mutation","setter","commit","accel","accel_with_gravity","geo","geo_request","gravity","gyro","motion_request","rotate","round","scroll","alpha","beta","gamma","absolute","interval","acceleration","accelerationIncludingGravity","rotationRate","x","y","z","navigator","geolocation","watchPosition","coords","timestamp","accuracy","altitude","altitudeAccuracy","heading","latitude","longitude","speed","code","enableHighAccuracy","maximumAge","pow","Math","top","center","bottom","left","right","horizon","height","width","device","scroll_poll","scrollY","scrollX","innerWidth","innerHeight","requestAnimationFrame","Dexie","dexie","is_cache","is_online","is_visible","poll","_ref5","default","document","version","stores","meta","timers","_waitwake","destroyed","results","clearTimeout","get_by_network","map","idx","_ref","_asyncToGenerator","list","_this","onLine","visibilityState","Promise","all","dispatch","apply","arguments","cache","vuex_id","rootState","roop","url","_ref2","get_by_lf","get_pass","_ref3","_ref4","wait","pack","_api","put","setTimeout","caches","opts","cb","fetch","res","json","transaction","_x","_x2","api","Query","path_by","keys","idx_a","at","length","find"],"mappings":"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","file":"lib/index.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VuePetitStore\"] = factory();\n\telse\n\t\troot[\"VuePetitStore\"] = factory();\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","_ = require 'lodash'\n\nrelative_to = ({ name, params, query, hash }, o, is_replace)->\n  unless is_replace\n    params = _.cloneDeep params\n    query  = _.cloneDeep query\n  to = { name, params, query, hash }\n  for key, val of o\n    if params[key]\n      params[key] = val\n    else\n      query[key] = val\n  to\n\nto_x = (type, sp, nil)-> (u)->\n  switch u?.constructor\n    when null, undefined, sp\n      nil\n    when type\n      u\n    else\n      type u\n\nto_msec = (str)->\n  1000 * to_sec str\n\nto_sec = (str)->\n  timeout = 0\n  str.replace /(\\d+)(.)|0/g, (_, num, unit)->\n    return unless num = Number num\n    timeout +=\n      switch unit\n        when \"s\"\n          num\n        when \"m\"\n          60 * num\n        when \"h\"\n          3600 * num\n        when \"d\"\n          3600 * 24 * num\n        when \"w\"\n          3600 * 24 * 7 * num\n        when \"y\"\n          3600 * 24 * 365 * num\n        else\n          throw new Error \"#{timestr} at #{num}#{unit}\"\n  timeout\n\nto_tempo = (since, gap = \"0s\")->\n  since = to_msec since\n  gap   = to_msec gap\n  gap  -= nine_hour\n\n  write_at = new Date - 0\n\n  now_idx = parseInt(( write_at - gap) / since)\n  last_at = (now_idx + 0) * since + gap\n  next_at = (now_idx + 1) * since + gap\n  timeout = next_at - write_at\n\n  { last_at, write_at, next_at, timeout, now_idx, timezone, since, gap }\n\nmodule.exports = {\n  relative_to\n  to_sec\n  to_msec\n  to_tempo\n  types:\n    [Number]:\n      to_str: to_x String, NaN, \"\"\n      by_str: to_x Number, \"\", NaN\n      by_url: to_x Number, \"\", NaN\n    [String]:\n      to_str: to_x String, null, \"\"\n      by_str: to_x String, \"\", null\n      by_url: to_x String, \"\", null\n    [Array]:\n      to_str: JSON.stringify\n      by_str: JSON.parse\n      by_url: to_x Array, null, null\n    [Object]:\n      to_str: JSON.stringify\n      by_str: JSON.parse\n}\n\nnine_hour = to_msec '9hour'\ntimezone = -nine_hour\n","module.exports = require(\"lodash\");","module.exports = require(\"memory-orm\");","module.exports = require(\"tiny-cookie\");","module.exports = {\n  ...require \"./struct\"\n  ...require \"./uri\"\n  ...require \"./storage\"\n  ...require \"./firebase\"\n  ...require \"./vuex\"\n  ...require \"./device\"\n  ...require \"./poll\"\n  ...require \"./path\"\n}","_ = require 'lodash'\nCookie = require 'tiny-cookie'\n{ types, relative_to } = require \"./struct\"\n\ntry\n  test = '__vue-localstorage-test__'\n\n  Cookie.set test, test, expres: '1M'\n  Cookie.remove test\n\n  window.localStorage.setItem test, test\n  window.localStorage.removeItem test\n\n  window.sessionStorage.setItem test, test\n  window.sessionStorage.removeItem test\n\n  history || throw new Error \"can't use history API.\"\ncatch e\n  console.warn 'Local storage not supported by this browser'\n\n\nbaseState = (change_url)-> (id)->\n  default_id = \"#{id}_default\"\n  type_id = \"#{id}_type\"\n\n  created: ->\n    @[default_id] = _.get @, id\n    @[type_id] = types[@[default_id].constructor]\n\n  mounted: ->\n    newVal = @$route.params[id] || @$route.query[id]\n    if newVal?\n      @[id] = @[type_id].by_url newVal\n\n  beforeRouteUpdate: (newRoute, oldRoute, next)->\n    next()\n    newVal = newRoute.params[id] || newRoute.query[id]\n    @[id] =\n      if newVal?\n        @[type_id].by_url newVal\n      else\n        @[default_id]\n\n  watch:\n    [id]: ( newVal )->\n      { location, href } = @$router.resolve relative_to @$route, { [id]: newVal }, true\n      change_url href\n\nmodule.exports = m =\n  replaceState: baseState (href)->\n    history.replaceState null, null, href\n\n  pushState: baseState (href)->\n    history.pushState null, null, href\n","_ = require 'lodash'\nCookie = require 'tiny-cookie'\n{ types, relative_to } = require \"./struct\"\n\ntry\n  test = '__vue-localstorage-test__'\n\n  Cookie.set test, test, expres: '1M'\n  Cookie.remove test\n\n  window.localStorage.setItem test, test\n  window.localStorage.removeItem test\n\n  window.sessionStorage.setItem test, test\n  window.sessionStorage.removeItem test\n\n  history || throw new Error \"can't use history API.\"\ncatch e\n  console.warn 'Local storage not supported by this browser'\n\n\nmodule.exports = m =\n  sessionStorage: (id)->\n    default_id = \"#{id}_default\"\n    type_id = \"#{id}_type\"\n\n    created: ->\n      @[default_id] = _.get @, id\n      @[type_id] = types[@[default_id].constructor]\n\n    mounted: ->\n      newVal = window.sessionStorage.getItem id\n      if newVal?\n        @[id] = @[type_id].by_str newVal\n\n    watch:\n      [id]: ( newVal )->\n        if newVal?\n          s = @[type_id].to_str newVal\n          window.sessionStorage.setItem id, s\n        else\n          window.sessionStorage.removeItem id\n\n  localStorage: (id)->\n    default_id = \"#{id}_default\"\n    handle_id = \"#{id}_handle\"\n    type_id = \"#{id}_type\"\n\n    created: ->\n      @[default_id] = _.get @, id\n      @[type_id] = types[@[default_id].constructor]\n\n    mounted: ->\n      newVal = window.localStorage.getItem id\n      if newVal?\n        @[id] = @[type_id].by_str newVal\n\n      @[handle_id] = ({ key, newValue })=>\n        if key == id\n          @[id] = @[type_id].by_str newValue\n      window.addEventListener \"storage\", @[handle_id]\n    \n    beforeDestroy: ->\n      window.removeEventListener \"storage\", @[handle_id]\n\n    watch:\n      [id]: ( newVal )->\n        if newVal?\n          s = @[type_id].to_str newVal\n          window.localStorage.setItem id, s\n        else\n          window.localStorage.removeItem id\n\n  cookie: (id, options = { expires: '1M' })->\n    default_id = \"#{id}_default\"\n    type_id = \"#{id}_type\"\n\n    created: ->\n      @[default_id] = _.get @, id\n      @[type_id] = types[@[default_id].constructor]\n\n    mounted: ->\n      newVal = Cookie.get id\n      if newVal?\n        @[id] = @[type_id].by_str newVal\n\n    watch:\n      [id]: ( newVal )->\n        if newVal?\n          s = @[type_id].to_str newVal\n          Cookie.set id, s, options\n        else\n          Cookie.remove id\n\n","Mem = require \"memory-orm\"\n\nif window?\n  firebase = require \"firebase\"\n\nfirestore = ->\n  store = firebase.firestore()\n  store.settings {}\n  store\n\njoinSnapshot = (target, shot)->\n  eject = ->\n  (gate)->\n    eject()\n    eject =\n      if gate && @[target]\n        console.log \"join\", gate\n        @[target].onSnapshot shot.bind @\n      else\n        ->\n\nfirestore_base = (id, path, chk, query, { del, add, snap, shot })->\n  default_id = \"#{id}_default\"\n\n  query_id = \"#{id}_query\"\n  snap_id  = \"#{id}_snap\"\n\n  chk_id  = \"#{id}_chk\"\n  path_id = \"#{id}_path\"\n\n  join_id = \"#{id}_join\"\n  add_id  = \"#{id}_add\"\n  del_id  = \"#{id}_del\"\n\n  [ snapshot, join_target ] =\n    if chk && query\n      [ chk_id, query_id ]\n    else\n      [ path_id, snap_id ]\n  join = joinSnapshot join_target, shot\n\n  comp =\n    _firestore: firestore\n    [path_id]: path\n    [snap_id]: ->\n      if @[path_id]\n        snap.call @, @[path_id]\n\n  if chk && query\n    Object.assign comp,\n      [chk_id]: chk\n      [query_id]: ->\n        if @[chk_id] && @[snap_id]\n          query.call @, @[snap_id]\n\n  data: ->\n    step: Mem.State.step\n\n  mounted: ->\n    @[default_id] = @[id]\n    @[join_id] @[snapshot]\n\n  beforeDestroy: ->\n    @[join_id] undefined\n\n  methods:\n    [join_id]: join\n    [add_id]: add\n    [del_id]: del\n\n  computed: comp\n\n  watch:\n    [snapshot]: join\n\n\nmodule.exports = m =\n  firestore_models: (id, path, chk, query)->\n    snap_id = \"#{id}_snap\"\n    set_key = id[..-2]\n    firestore_base id, path, chk, query,\n      del: (_id)->\n        return unless _id\n        @[snap_id]?.doc(_id).delete()\n      add: (doc)->\n        { _id } = doc\n        return unless _id\n        @[snap_id]?.doc(_id).set doc,\n          merge: true\n      snap: (path)->\n        @_firestore.collection path\n      shot: (qs)->\n        qs.docChanges().forEach ({ newIndex, oldIndex, type, doc })=>\n          switch type\n            when 'added', 'modified'\n              Mem.Set[set_key].add doc.data()\n            when 'removed'\n              Mem.Set[set_key].remove doc.id\n\n  firestore_model: (id, path)->\n    snap_id = \"#{id}_snap\"\n    set_key = id\n    firestore_base id, path, null, null,\n      del: ->\n        @[snap_id]?.delete()\n      add: (doc)->\n        @[snap_id]?.set doc,\n          merge: true\n      snap: (path)->\n        @_firestore.doc path\n      shot: (doc)->\n        if o = doc.data()\n          Mem.Set[set_key].add o\n        else\n          Mem.Set[set_key].remove doc.id\n\n  firestore_collection: (id, path, chk, query)->\n    snap_id = \"#{id}_snap\"\n    firestore_base id, path, chk, query,\n      del: (_id)->\n        return unless _id\n        @[snap_id]?.doc(_id).delete()\n      add: (doc)->\n        { _id } = doc\n        return unless _id\n        @[snap_id]?.doc(_id).set doc,\n          merge: true\n      snap: (path)->\n        @_firestore.collection path\n      shot: (qs)->\n        qs.docChanges().forEach ({ newIndex, oldIndex, type, doc })=>\n          switch type\n            when 'added', 'modified'\n              @[id][doc.id] = doc.data()\n            when 'removed'\n              delete @[id][doc.id]\n\n  firestore_doc: (id, path)->\n    snap_id = \"#{id}_snap\"\n    default_id = \"#{id}_default\"\n    firestore_base id, path, null, null,\n      del: ->\n        @[snap_id]?.delete()\n      add: (doc)->\n        @[snap_id]?.set doc,\n          merge: true\n      snap: (path)->\n        @_firestore.doc path\n      shot: (doc)->\n        @[id] =\n          if doc.exists\n            doc.data()\n          else\n            @[default_id]\n","module.exports = require(\"firebase\");","_ = require 'lodash'\n\nmodule.exports = m =\n  vuex_read: (key, opt)->\n    dir = (opt.on || \"\").split('.')\n    getter = [...dir[0..-1], key].join('.')\n\n    computed:\n      [key]:\n        get: ->\n          _.get @$store.state, getter\n\n  vuex: (key, opt)->\n    dir = (opt.on || \"\").split('.')\n    mutation = [dir[0], 'update'].join('/')\n    getter = [...dir[0..-1], key].join('.')\n    setter = [...dir[1..-1], key].join('.')\n  \n    computed:\n      [key]:\n        get: ->\n          _.get @$store.state, getter\n        set: (val)->\n          o = _.set {}, setter, val\n          @$store.commit mutation, o\n\n","motion_request = ->\n  return unless window?\n  window.addEventListener \"deviceorientation\", ({ alpha, beta, gamma, absolute })->\n    gyro.alpha = round alpha\n    gyro.beta = round beta\n    gyro.gamma = round gamma\n\n  window.addEventListener \"devicemotion\", ({ interval, acceleration, accelerationIncludingGravity, rotationRate })->\n    interval\n    { x, y, z } = acceleration\n    accel.x = round x\n    accel.y = round y\n    accel.z = round z\n\n    { x, y, z } = accelerationIncludingGravity\n    accel_with_gravity.x = round x\n    accel_with_gravity.y = round y\n    accel_with_gravity.z = round z\n\n    gravity.x = round x - acceleration.x\n    gravity.y = round y - acceleration.y\n    gravity.z = round z - acceleration.z\n\n    { alpha, beta, gamma } = rotationRate\n    rotate.alpha = round alpha\n    rotate.beta  = round beta\n    rotate.gamma = round gamma\n\n  motion_request = ->\n\ngeo_request = ->\n  return unless navigator?.geolocation?\n  navigator.geolocation.watchPosition ({ coords, timestamp })->\n    { accuracy, altitudeAccuracy, latitude, longitude, altitude, heading, speed } = coords\n    geo.latitude = latitude\n    geo.longitude = longitude\n    geo.altitude = altitude\n    geo.heading = heading\n    geo.speed = speed\n\n  , ({ code })->\n    console.log \"watchPosition error = #{code}\"\n  ,\n    enableHighAccuracy: true\n    timeout:    10 * 1000\n    maximumAge: 60 * 1000\n\n  geo_request = ->\n\nround = (val)->\n  m.pow * Math.round val\n\ngyro =\n  alpha: 0 # z-axis\n  beta:  0 # x-axis\n  gamma: 0 # y-axis\n\naccel =\n  x: 0\n  y: 0\n  z: 0\n\ngravity =\n  x: 0\n  y: 0\n  z: 0\n\naccel_with_gravity =\n  x: 0\n  y: 0\n  z: 0\n\nrotate =\n  alpha: 0\n  beta:  0\n  gamma: 0\n\ngeo =\n  latitude:  0\n  longitude: 0\n  altitude:  0\n  heading:   0\n  speed:     0\n\nscroll =\n  top:    0\n  center: 0\n  bottom: 0\n\n  left:   0\n  right:  0\n\n  horizon: 0\n  height:  0\n  width:   0\n\n\n\nmodule.exports = m =\n  device: ({ pow })->\n    m.pow = pow\n\n  geo: ->\n    data: ->\n      { geo }\n    mounted: ->\n      geo_request()\n\n  accel: ->\n    data: ->\n      { accel, gravity, accel_with_gravity }\n\n    created: ->\n      motion_request()\n\n  rotate: ->\n    data: ->\n      { gyro, rotate }\n\n    created: ->\n      motion_request()\n\n  scroll: ->\n    data: ->\n      { scroll }\n\n    created: ->\n      return unless window?\n      @scroll_poll()\n\n    methods:\n      scroll_poll: ->\n        @scroll.top = scrollY\n        @scroll.left = scrollX\n        @scroll.width = innerWidth\n        @scroll.height = innerHeight\n        { height, top, left, width } = @scroll\n\n        @scroll.horizon = parseInt height / 2\n        @scroll.center = parseInt top + height / 2\n        @scroll.bottom = parseInt top + height\n        @scroll.right = parseInt left + width\n\n        requestAnimationFrame @scroll_poll\n\n","Mem = require 'memory-orm'\nDexie = require(\"dexie\").default\n\n{ to_tempo } = require \"./struct\"\n\nis_cache = {}\nis_online = is_visible = false\n\nif document?\n  dexie = new Dexie 'giji'\n  dexie\n  .version(1).stores\n    meta: '&idx'\n    data: '&idx'\n\n\npoll = (opt)->\n  data: ->\n    step: Mem.State.step\n\n  mounted: ->\n    @timers = {}\n    window.addEventListener 'offline', @_waitwake\n    window.addEventListener 'online', @_waitwake\n    document.addEventListener 'visibilitychange', @_waitwake\n    @_waitwake()\n      \n  destroyed: ->\n    window.removeEventListener 'offline', @_waitwake\n    window.removeEventListener 'online', @_waitwake\n    document.removeEventListener 'visibilitychange', @_waitwake\n    for key, val of @timers\n      clearTimeout val\n\n  methods:\n    get_by_network: ->\n      for key, val of @timers\n        clearTimeout val\n\n      list = opt.call @\n      list.map ([name, id])=>\n        idx = [name, id].join(\"&\")\n        dexie.meta.delete idx\n        dexie.data.delete idx\n        is_cache[idx] = 0\n      @_waitwake()\n\n    _waitwake: ->\n      is_online  = window.navigator.onLine\n      is_visible = 'hidden' != document.visibilityState\n      is_ok = is_online && is_visible\n      if is_ok\n        list = opt.call @\n        await Promise.all list.map ([name, id])=>\n          @$store.dispatch name, { id, name, @timers }\n      else\n        for key, val of @timers\n          clearTimeout val\n\npoll.cache = (timestr, vuex_id, opt)->\n  # console.log { timestr, timeout, url: opt('*') }\n  ({ dispatch, state, commit, rootState }, { id, name, timers })->\n    url = opt id\n    idx = [name, id].join(\"&\")\n\n    roop = ->\n      { last_at, write_at, next_at, timeout } = to_tempo timestr\n\n\n      get_pass = ->\n        wait = new Date - write_at\n        console.log { timestr, idx, wait, url: null }\n\n      get_by_lf = ->\n        { pack } = await dexie.data.get idx\n        Mem.State.store pack\n        wait = new Date - write_at \n        console.log { timestr, idx, wait, url: '(LF)' }\n\n      get_by_network = ->\n        pack = await poll._api[name] url, id\n        await dexie.data.put { idx, pack }\n        wait = new Date - write_at\n        console.log { timestr, idx, wait, url }\n\n\n      if write_at < is_cache[idx]\n        get_pass()\n      else\n        # IndexedDB metadata not use if memory has past data, \n        unless 0 < is_cache[idx]\n          meta = await dexie.meta.get idx\n\n        switch\n          when write_at < meta?.next_at\n            await get_by_lf()\n\n          when 0 < meta?.next_at\n            await get_by_lf()\n            await get_by_network()\n\n          else\n            await get_by_network()\n            dexie.meta.put { idx, next_at }\n\n      is_cache[idx] = next_at\n      if timeout < 0x7fffffff  #  ほぼ25日\n        timers[url] = setTimeout roop, timeout\n    roop()\n\npoll.caches = (timestr, opts)->\n  for key, cb of opts\n    opts[key] = poll.cache timestr, key, cb\n  opts\n\npoll._api =\n  fetch: (url, cb)->\n    res = await fetch url\n    data = await res.json()\n    Mem.State.transaction ->\n      cb data\n\npoll.api = (o)->\n  Object.assign poll._api, o\n\nmodule.exports = { poll }\n","module.exports = require(\"dexie\");","{ Query } = require 'memory-orm'\n\nmodule.exports = m =\n  path_by: (idx = 'idx', keys)->\n    idx_a = \"#{idx}_a\"\n    computed = {}\n    computed[idx_a] =\n      get: ->\n        @[idx].split(\"-\")\n\n    keys.forEach (name, at)->\n      return unless name\n      key  = \"#{name}_id\"\n      list = \"#{name}s\"\n      computed[key] =\n        get: ->\n          if at < @[idx_a].length\n            @[idx_a][0..at].join(\"-\")\n      computed[name] =\n        get: ->\n          Query[list].find @[key]\n    { computed }\n"],"sourceRoot":""}