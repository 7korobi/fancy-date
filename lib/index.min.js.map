{"version":3,"sources":["webpack://VuePetitStore/webpack/universalModuleDefinition","webpack://VuePetitStore/webpack/bootstrap","webpack://VuePetitStore/./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack://VuePetitStore/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://VuePetitStore/external \"lodash\"","webpack://VuePetitStore/external \"core-js/modules/web.dom.iterable\"","webpack://VuePetitStore/./src/struct.coffee","webpack://VuePetitStore/external \"memory-orm\"","webpack://VuePetitStore/external \"core-js/modules/es6.regexp.split\"","webpack://VuePetitStore/./src/index.coffee","webpack://VuePetitStore/./node_modules/@babel/runtime/helpers/esm/objectSpread.js","webpack://VuePetitStore/external \"core-js/modules/es6.number.constructor\"","webpack://VuePetitStore/external \"core-js/modules/es6.regexp.replace\"","webpack://VuePetitStore/external \"core-js/modules/es6.function.name\"","webpack://VuePetitStore/./src/browser.coffee","webpack://VuePetitStore/external \"tiny-cookie\"","webpack://VuePetitStore/./src/firebase.coffee","webpack://VuePetitStore/external \"firebase\"","webpack://VuePetitStore/./src/vuex.coffee","webpack://VuePetitStore/./src/path.coffee","webpack://VuePetitStore/external \"core-js/modules/es6.array.find\"","webpack://VuePetitStore/./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://VuePetitStore/./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://VuePetitStore/./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://VuePetitStore/./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://VuePetitStore/./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack://VuePetitStore/./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack://VuePetitStore/./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://VuePetitStore/./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js"],"names":["root","factory","exports","module","define","amd","global","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","obj","default","_defineProperty","configurable","writable","__webpack_exports__","require","nine_hour","relative_to","timezone","to_msec","to_sec","to_tempo","to_x","_ref","is_replace","to","val","params","query","hash","_","cloneDeep","type","sp","nil","u","constructor","str","timeout","replace","num","unit","Number","Error","concat","timestr","since","next_at","now_idx","write_at","gap","arguments","length","undefined","Date","last_at","parseInt","types","_types","_defineProperty2","to_str","String","by_str","by_url","Array","JSON","stringify","parse","_objectSpread2","_objectSpread","_defineProperty__WEBPACK_IMPORTED_MODULE_0__","target","source","ownKeys","keys","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","forEach","Cookie","test","set","expres","remove","window","localStorage","setItem","removeItem","sessionStorage","history","error","console","warn","replaceState","id","default_id","type_id","created","this","mounted","newVal","$route","beforeRouteUpdate","newRoute","oldRoute","next","watch","href","_this$$router$resolve","$router","resolve","location","pushState","_this$$router$resolve2","getItem","handle_id","_this","addEventListener","beforeDestroy","removeEventListener","cookie","options","expires","Set","State","firebase","firestore","firestore_base","joinSnapshot","store","settings","timestampsInSnapshots","shot","eject","gate","log","onSnapshot","path","chk","_methods","_ref4","_ref5","add_id","chk_id","del_id","join","join_id","join_target","path_id","query_id","snap_id","snapshot","del","add","snap","_ref2","_ref3","_slicedToArray2","data","step","methods","computed","_firestore","firestore_models","set_key","slice","_id","ref","doc","delete","merge","collection","qs","docChanges","_ref6","newIndex","oldIndex","firestore_model","firestore_collection","_ref7","firestore_doc","exists","vuex_read","dir","split","map","_toConsumableArray2","$store","state","vuex","mutation","setter","commit","Query","path_by","idx_a","idx","at","list","find","_slicedToArray","arr","isArray","_arrayWithHoles","_arr","_n","_d","_e","_s","_i","iterator","done","push","err","_iterableToArrayLimit","TypeError","_nonIterableRest","_toConsumableArray","arr2","_arrayWithoutHoles","iter","toString","from","_iterableToArray","_nonIterableSpread"],"mappings":"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","file":"lib/index.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VuePetitStore\"] = factory();\n\telse\n\t\troot[\"VuePetitStore\"] = factory();\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","module.exports = require(\"lodash\");","module.exports = require(\"core-js/modules/web.dom.iterable\");","\nrelative_to = ({ name, params, query, hash }, o, is_replace)->\n  unless is_replace\n    params = _.cloneDeep params\n    query  = _.cloneDeep query\n  to = { name, params, query, hash }\n  for key, val of o\n    if params[key]\n      params[key] = val\n    else\n      query[key] = val\n  to\n\nto_x = (type, sp, nil)-> (u)->\n  switch u?.constructor\n    when null, undefined, sp\n      nil\n    when type\n      u\n    else\n      type u\n\nto_msec = (str)->\n  1000 * to_sec str\n\nto_sec = (str)->\n  timeout = 0\n  str.replace /(\\d+)(.)|0/g, (_, num, unit)->\n    return unless num = Number num\n    timeout +=\n      switch unit\n        when \"s\"\n          num\n        when \"m\"\n          60 * num\n        when \"h\"\n          3600 * num\n        when \"d\"\n          3600 * 24 * num\n        when \"w\"\n          3600 * 24 * 7 * num\n        when \"y\"\n          3600 * 24 * 365 * num\n        else\n          throw new Error \"#{timestr} at #{num}#{unit}\"\n  timeout\n\nto_tempo = (since, gap = \"0s\")->\n  since = to_msec since\n  gap   = to_msec gap\n  gap  -= nine_hour\n\n  write_at = new Date - 0\n\n  now_idx = parseInt(( write_at - gap) / since)\n  last_at = (now_idx + 0) * since + gap\n  next_at = (now_idx + 1) * since + gap\n  timeout = next_at - write_at\n\n  { last_at, write_at, next_at, timeout, now_idx, timezone, since, gap }\n\nmodule.exports = {\n  relative_to\n  to_sec\n  to_msec\n  to_tempo\n  types:\n    [Number]:\n      to_str: to_x String, NaN, \"\"\n      by_str: to_x Number, \"\", NaN\n      by_url: to_x Number, \"\", NaN\n    [String]:\n      to_str: to_x String, null, \"\"\n      by_str: to_x String, \"\", null\n      by_url: to_x String, \"\", null\n    [Array]:\n      to_str: JSON.stringify\n      by_str: JSON.parse\n      by_url: to_x Array, null, null\n    [Object]:\n      to_str: JSON.stringify\n      by_str: JSON.parse\n}\n\nnine_hour = to_msec '9hour'\ntimezone = -nine_hour\n","module.exports = require(\"memory-orm\");","module.exports = require(\"core-js/modules/es6.regexp.split\");","module.exports = {\n  ...require \"./struct\"\n  ...require \"./browser\"\n  ...require \"./firebase\"\n  ...require \"./vuex\"\n  ...require \"./path\"\n}","import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","module.exports = require(\"core-js/modules/es6.number.constructor\");","module.exports = require(\"core-js/modules/es6.regexp.replace\");","module.exports = require(\"core-js/modules/es6.function.name\");","_ = require 'lodash'\nCookie = require 'tiny-cookie'\n{ types, relative_to } = require \"./struct\"\n\ntry\n  test = '__vue-localstorage-test__'\n\n  Cookie.set test, test, expres: '1M'\n  Cookie.remove test\n\n  window.localStorage.setItem test, test\n  window.localStorage.removeItem test\n\n  window.sessionStorage.setItem test, test\n  window.sessionStorage.removeItem test\n\n  history || throw new Error \"can't use history API.\"\ncatch e\n  console.warn 'Local storage not supported by this browser'\n\n\nmodule.exports = m =\n  replaceState: (id)->\n    default_id = \"#{id}_default\"\n    type_id = \"#{id}_type\"\n\n    created: ->\n      @[default_id] = _.get @, id\n      @[type_id] = types[@[default_id].constructor]\n\n    mounted: ->\n      newVal = @$route.params[id] || @$route.query[id]\n      newVal = @[type_id].by_url newVal\n      newVal ?= @[default_id]\n      @[id] = newVal\n\n    beforeRouteUpdate: (newRoute, oldRoute, next)->\n      next()\n      newVal = newRoute.params[id] || newRoute.query[id]\n      newVal = @[type_id].by_url newVal\n      newVal ?= @[default_id]\n      @[id] = newVal\n\n    watch:\n      [id]: ( newVal )->\n        { location, href } = @$router.resolve relative_to @$route, { [id]: newVal }, true\n        history.replaceState null, null, href\n\n  pushState: (id)->\n    default_id = \"#{id}_default\"\n    type_id = \"#{id}_type\"\n\n    created: ->\n      @[default_id] = _.get @, id\n      @[type_id] = types[@[default_id].constructor]\n\n    mounted: ->\n      newVal = @$route.params[id] || @$route.query[id]\n      newVal = @[type_id].by_url newVal\n      newVal ?= @[default_id]\n      @[id] = newVal\n\n    beforeRouteUpdate: (newRoute, oldRoute, next)->\n      next()\n      newVal = newRoute.params[id] || newRoute.query[id]\n      newVal = @[type_id].by_url newVal\n      newVal ?= @[default_id]\n      @[id] = newVal\n\n    watch:\n      [id]: ( newVal )->\n        { location, href } = @$router.resolve relative_to @$route, { [id]: newVal }, true\n        history.pushState null, null, href\n\n  sessionStorage: (id)->\n    default_id = \"#{id}_default\"\n    type_id = \"#{id}_type\"\n\n    created: ->\n      @[default_id] = _.get @, id\n      @[type_id] = types[@[default_id].constructor]\n\n    mounted: ->\n      newVal = window.sessionStorage.getItem id\n      if newVal?\n        @[id] = @[type_id].by_str newVal\n\n    watch:\n      [id]: ( newVal )->\n        if newVal?\n          s = @[type_id].to_str newVal\n          window.sessionStorage.setItem id, s\n        else\n          window.sessionStorage.removeItem id\n\n  localStorage: (id)->\n    default_id = \"#{id}_default\"\n    handle_id = \"#{id}_handle\"\n    type_id = \"#{id}_type\"\n\n    created: ->\n      @[default_id] = _.get @, id\n      @[type_id] = types[@[default_id].constructor]\n\n    mounted: ->\n      newVal = window.localStorage.getItem id\n      if newVal?\n        @[id] = @[type_id].by_str newVal\n\n      @[handle_id] = ({ key, newVal })=>\n        if key == id\n          @[id] = @[type_id].by_str newVal\n      window.addEventListener \"storage\", @[handle_id]\n    \n    beforeDestroy: ->\n      window.removeEventListener \"storage\", @[handle_id]\n\n    watch:\n      [id]: ( newVal )->\n        if newVal?\n          s = @[type_id].to_str newVal\n          window.localStorage.setItem id, s\n        else\n          window.localStorage.removeItem id\n\n  cookie: (id, options = { expires: '1M' })->\n    default_id = \"#{id}_default\"\n    type_id = \"#{id}_type\"\n\n    created: ->\n      @[default_id] = _.get @, id\n      @[type_id] = types[@[default_id].constructor]\n\n    mounted: ->\n      newVal = Cookie.get id\n      if newVal?\n        @[id] = @[type_id].by_str newVal\n\n    watch:\n      [id]: ( newVal )->\n        if newVal?\n          s = @[type_id].to_str newVal\n          Cookie.set id, s, options\n        else\n          Cookie.remove id\n\n","module.exports = require(\"tiny-cookie\");","firebase = require \"firebase\"\n{ State, Set } = require \"memory-orm\"\n_ = require \"lodash\"\n\nfirestore = ->\n  store = firebase.firestore()\n  store.settings\n    timestampsInSnapshots: true\n  store\n\njoinSnapshot = (target, shot)->\n  eject = ->\n  (gate)->\n    eject()\n    eject =\n      if gate && @[target]\n        console.log \"join\", gate\n        @[target].onSnapshot shot.bind @\n      else\n        ->\n\nfirestore_base = (id, path, chk, query, { del, add, snap, shot })->\n  default_id = \"#{id}_default\"\n\n  query_id = \"#{id}_query\"\n  snap_id  = \"#{id}_snap\"\n\n  chk_id  = \"#{id}_chk\"\n  path_id = \"#{id}_path\"\n\n  join_id = \"#{id}_join\"\n  add_id  = \"#{id}_add\"\n  del_id  = \"#{id}_del\"\n\n  [ snapshot, join_target ] =\n    if chk && query\n      [ chk_id, query_id ]\n    else\n      [ path_id, snap_id ]\n  join = joinSnapshot join_target, shot\n\n  data: ->\n    step: State.step\n\n  mounted: ->\n    @[default_id] = @[id]\n    @[join_id] @[snapshot]\n\n  beforeDestroy: ->\n    @[join_id] undefined\n\n  methods:\n    [join_id]: join\n    [add_id]: add\n    [del_id]: del\n\n  computed:\n    if chk && query\n      _firestore: firestore\n\n      [path_id]: path\n      [snap_id]: ->\n        if @[path_id]\n          snap.call @, @[path_id]\n\n      [chk_id]: chk\n      [query_id]: ->\n        if @[chk_id] && @[snap_id]\n          query.call @, @[snap_id]\n    else\n      _firestore: firestore\n\n      [path_id]: path\n      [snap_id]: ->\n        if @[path_id]\n          snap.call @, @[path_id]\n\n  watch:\n    [snapshot]: join\n\n\nmodule.exports = m =\n  firestore_models: (id, path, chk, query)->\n    snap_id = \"#{id}_snap\"\n    set_key = id[..-2]\n    firestore_base id, path, chk, query,\n      del: (_id)->\n        return unless _id\n        @[snap_id]?.doc(_id).delete()\n      add: (doc)->\n        { _id } = doc\n        return unless _id\n        @[snap_id]?.doc(_id).set doc,\n          merge: true\n      snap: (path)->\n        @_firestore.collection path\n      shot: (qs)->\n        qs.docChanges().forEach ({ newIndex, oldIndex, type, doc })=>\n          console.log { type, newIndex, oldIndex }\n          switch type\n            when 'added', 'modified'\n              Set[set_key].add doc.data()\n            when 'removed'\n              Set[set_key].remove doc.id\n\n  firestore_model: (id, path)->\n    snap_id = \"#{id}_snap\"\n    set_key = id\n    firestore_base id, path, null, null,\n      del: ->\n        @[snap_id]?.delete()\n      add: (doc)->\n        @[snap_id]?.set doc,\n          merge: true\n      snap: (path)->\n        @_firestore.doc path\n      shot: (doc)->\n        if o = doc.data()\n          Set[set_key].add o\n        else\n          Set[set_key].remove doc.id\n\n  firestore_collection: (id, path, chk, query)->\n    snap_id = \"#{id}_snap\"\n    firestore_base id, path, chk, query,\n      del: (_id)->\n        return unless _id\n        @[snap_id]?.doc(_id).delete()\n      add: (doc)->\n        { _id } = doc\n        return unless _id\n        @[snap_id]?.doc(_id).set doc,\n          merge: true\n      snap: (path)->\n        @_firestore.collection path\n      shot: (qs)->\n        qs.docChanges().forEach ({ newIndex, oldIndex, type, doc })=>\n          switch type\n            when 'added', 'modified'\n              @[id][doc.id] = doc.data()\n            when 'removed'\n              console.log doc.data()\n              delete @[id][doc.id]\n\n  firestore_doc: (id, path)->\n    snap_id = \"#{id}_snap\"\n    default_id = \"#{id}_default\"\n    firestore_base id, path, null, null,\n      del: ->\n        @[snap_id]?.delete()\n      add: (doc)->\n        @[snap_id]?.set doc,\n          merge: true\n      snap: (path)->\n        @_firestore.doc path\n      shot: (doc)->\n        @[id] =\n          if doc.exists\n            doc.data()\n          else\n            @[default_id]\n","module.exports = require(\"firebase\");","_ = require 'lodash'\n\nmodule.exports = m =\n  vuex_read: (path, keys)->\n    dir = path.split('.')\n    computed = {}\n    keys.map (key)->\n      getter = [...dir[0..-1], key].join('.')\n      computed[key] =\n        get: ->\n          _.get @$store.state, getter\n    { computed }\n\n  vuex: (path, keys)->\n    dir = path.split('.')\n    computed = {}\n    keys.forEach (key)->\n      mutation = \"#{dir[0]}/update\"\n      getter = [...dir[0..-1], key].join('.')\n      setter = [...dir[1..-1], key].join('.')\n      computed[key] =\n        get: ->\n          _.get @$store.state, getter\n        set: (val)->\n          o = _.set {}, setter, val\n          @$store.commit mutation, o\n    { computed }\n\n","{ Query } = require 'memory-orm'\n\nmodule.exports = m =\n  path_by: (idx = 'idx', keys)->\n    idx_a = \"#{idx}_a\"\n    computed = {}\n    computed[idx_a] =\n      get: ->\n        @[idx].split(\"-\")\n\n    keys.forEach (name, at)->\n      return unless name\n      key  = \"#{name}_id\"\n      list = \"#{name}s\"\n      computed[key] =\n        get: ->\n          if at < @[idx_a].length\n            @[idx_a][0..at].join(\"-\")\n      computed[name] =\n        get: ->\n          Query[list].find @[key]\n    { computed }\n","module.exports = require(\"core-js/modules/es6.array.find\");","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}"],"sourceRoot":""}