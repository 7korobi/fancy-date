!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.FancyDate=t():e.FancyDate=t()}(global,(function(){return function(e){var t={};function i(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(s,a,function(t){return e[t]}.bind(null,a));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=2)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FancyDate=void 0;var s,a,n,r,c,l,o,h,d,u,_=[].slice,f=[].splice,m=function(e,t){return(+e%(t=+t)+t)%t};({Tempo:a,to_tempo_by:u,to_tempo_bare:d}=i(1)),n=i(4),o=/([ABCabcGuYyMdHmsSEQZNDwJ])(o|\1*)|''|'(''|[^'])+('|$)|./g,r=function(e,t){var i,s,a;for(i in s=[],t)a=t[i],s.push(this.calc[e][i]=(null!=a?a[e]:void 0)||a);return s},h=function(e,t){return{range:[t],msec:e/=t}},c=function(e,t){var i;return{range:i=[Math.floor(e/t)],msec:e=i[0]*t}},l=function(e,t){return{range:[Math.floor(e/t),Math.ceil(e/t)],msec:e=e}},s=class{constructor(e){var t,i,s;[t,i]=e,[s]=_.call(e,-1),null!=t&&(t.length?(this.list=t,this.length=t.length):this.length=t,(null!=i?i.length:void 0)===t.length&&(this.rubys=i)),null!=s&&(s.length||(this.zero=s))}};t.FancyDate=class{constructor(e){e?({dic:this.dic,calc:this.calc}=n.cloneDeep(e)):(this.dic={},this.calc={eras:[],divs:{},idx:{},zero:{},msec:{},range:{}},(()=>{var e,t,i,a,n,r,c,l,o,h,d,u,_,f,m,y,p,g,x,b,w,v,z,M,j,D,C,E;for(g in v=[],w={A:e=t=i=a=n=r=c=l=o=h=d=u=_=[],B:e,C:t,D:i,E:a,F:n,G:["紀元前"],H:r,J:c,M:l,N:o,Q:h,S:d,Y:u,Z:_,a:f=m=y=p=x=b=z=M=D=C=E=[],b:f,c:m,d:y,f:p,m:x,p:b,s:z,u:M,w:D,x:C,y:E})j=w[g],v.push(this.dic[g]=new s(j))})())}dup(){return new this.constructor(this)}planet(e,t,i,s){var a,n,o;return o=l(e[0],i[0]),a=c(i[0],i[0]),t&&(n=l(t[0],i[0])),r.call(this,"range",{year:o}),r.call(this,"msec",{year:o,moon:n,day:a}),Object.assign(this.dic,{sunny:e,moony:t,earthy:i,geo:s}),this}era(e,t=[]){var i;return i=["紀元前",...t.map(([e])=>e)],this.dic.G=new s([i]),Object.assign(this.dic,{era:e,eras:t}),this}calendar(e=["1970-1-1 0:0:0","y-M-d H:m:s",0],t=null,i=null){return Object.assign(this.dic,{month_divs:i,leaps:t,start:e}),this.is_table_leap=null!=t,this.is_table_month=null!=i,this}algo(e){var t,i,a,n,r,c,l,o,h;for(n in e)h=e[n],this.dic[n]=new s(h);return(null!=(r=e.C)&&null!=(c=r[0])?c.length:void 0)&&(null!=(l=e.B)&&null!=(o=l[0])?o.length:void 0)&&(this.dic.c=new s(e.C),this.dic.b=new s(e.B),this.dic.C.zero=this.dic.B.zero=this.dic.A.zero,this.dic.c.zero=this.dic.b.zero=this.dic.a.zero),this.dic.C.list&&this.dic.B.list&&(this.dic.A.list=this.dic.a.list=function(){var e,s,n;for(n=[],a=e=0,s=this.dic.A.length;0<=s?e<s:e>s;a=0<=s?++e:--e)i=this.dic.C.list[a%this.dic.C.length],t=this.dic.B.list[a%this.dic.B.length],n.push(`${i}${t}`);return n}.call(this)),this.dic.C.rubys&&this.dic.B.rubys&&(this.dic.A.rubys=this.dic.a.rubys=function(){var e,s,n;for(n=[],a=e=0,s=this.dic.a.length;0<=s?e<s:e>s;a=0<=s?++e:--e)i=this.dic.C.rubys[a%this.dic.C.length],t=this.dic.B.rubys[a%this.dic.B.length],n.push(`${`${i.replace(/と$/,"との")}${t}`}`);return n}.call(this)),this}daily(e=!1){return this.dic.is_solor=e,this}init(){return this.def_regex(),this.def_to_idx(),this.def_to_label(),this.def_calc(),this.def_table(),this.def_idx(),this.def_zero(),this.def_eras(),this}def_regex(){var e,t,i,s,a,n,r,c,l,o,h,d,u,_,f,m,y,p,g,x,b,w,v,z,M,j,D;for(p in w=[],b={A:e=t=i=s=a=n=r=c=d=u=_=f=y=g=x=v=e=>e?e.join?`(${e.join("|")})`:`([${e}])`:"(\\d+)",B:e,C:t,D:l=o=h=m=z=M=D=()=>"(\\d+)",E:i,F:s,G:a,H:n,J:j=()=>"([\\d.]+)",M:r,N:c,Q:l,S:o,Y:h,Z:d,a:u,b:_,c:f,d:m,f:y,m:g,p:x,s:v,u:z,w:M,x:j,y:D})y=b[p],w.push(this.dic[p].regex=y(this.dic[p].list));return w}def_to_idx(){var e,t,i,s,a,n,r,c,l,o,h,d,u,_,f,m,y,p,g,x,b,w,v,z,M,j;for(m in x=[],g={A:e=t=i=s=a=n=o=h=d=u=_=f=function(e){var t;return!this.list||(t=this.list.indexOf(e))<0?e-1:t},B:e,C:t,D:r=p=z=function(e){return e-1},E:i,F:s,G:function(e){var t;return!this.list||(t=this.list.indexOf(e))<0?e-0:t},H:y=b=function(e){var t;return!this.list||(t=this.list.indexOf(e))<0?e-0:t},J:c=l=w=M=j=function(e){return e-0},M:a,N:n,Q:r,S:c,Y:l,Z:o,a:h,b:d,c:u,d:_,f:f,m:y,p:p,s:b,u:w,w:z,x:M,y:j})v=g[m],x.push(this.dic[m].to_idx=v);return x}def_to_label(){var e,t,i,s,a,r,c,l,o,h,d,u,_,f,m,y,p,g,x,b,w,v,z,M,j,D,C,E,A;for(p in u=function(){var e;if(this.list&&null!=(e=this.list[this.now_idx]))return e},c=function(e){var t;return`${this.is_leap?"閏":""}${null!=(t=u.call(this))?t:b.call(this,e)}`},r=g=M=function(e){var t;return null!=(t=u.call(this))?t:x.call(this,e)},e=t=i=s=a=l=h=d=_=f=m=y=function(e){var t;return null!=(t=u.call(this))?t:b.call(this,e)},z=[],v={A:e,B:t,C:i,D:o=w=C=b=function(e){return n.padStart(this.now_idx+1,e,"0")},E:s,F:a,G:function(){return this.label},H:r,J:E=function(e){var t,i;return t=parseInt(this.now_idx),i=`${this.now_idx%1}`.slice(1),n.padStart(t,e,"0")+i},M:c,N:l,Q:o,S:function(e){return`${this.now_idx}`.slice(1)},Y:j=A=x=function(e){return n.padStart(this.now_idx,e,"0")},Z:h,a:d,b:_,c:f,d:m,f:y,m:g,p:w,s:M,u:j,w:C,x:E,y:A})D=v[p],z.push(this.dic[p].to_label=D);return z}def_calc(){var e,t,i,s,a,n;return s=h(this.calc.msec.year,this.dic.Z.length),i=l(this.calc.msec.year/this.dic.M.length,this.calc.msec.day),n=c(this.dic.E.length*this.calc.msec.day,this.calc.msec.day),e=h(this.calc.msec.day,this.dic.H.length),t=h(e.msec,this.dic.m.length),a=h(t.msec,t.msec/1e3),r.call(this,"range",{month:i,hour:e,minute:t,second:a}),r.call(this,"msec",{season:s,month:i,week:n,hour:e,minute:t,second:a})}def_eras(){var e,t,i,s,a,n;return n=this.calc.zero.era,(t=function(){var t,r,c,l;for(c=this.dic.eras,l=[],e=t=0,r=c.length;t<r;e=++t)[s,i]=c[e],({u:a}=this.to_tempos(i)),this.calc.eras.push([s,i,a.now_idx]),l.push(i-n);return l}.call(this)).push(Infinity),this.table.msec.era=t}def_table_by_leap_day(){var e,t,i,s,a,n,l,o,h,d,u,_,m,y,p,g,x,b,w,v,z,M,j;for(t=this.calc.msec.day,z=function(e){var i,s,a,n,r;for(n=0,r=[],s=0,a=e.length;s<a;s++)i=e[s],r.push(n+=i*t);return r},w=this.dic.leaps,[...o]=w,[g]=f.call(o,-1),(b={year:function(){var e,t,n,r,c;for(c=[],s=e=0,r=g;0<=r?e<r:e>r;s=0<=r?++e:--e){for(a=0,_=t=0,n=o.length;t<n;_=++t)i=o[_],s%i||(a=!_%2);c.push(this.calc.range.year[a])}return c}.call(this)}).year[0]=this.calc.range.year[1],j=this.calc.range.year,({month_divs:y}=this.dic),y||((y=function(){var e,t,i,a;for(i=this.dic.M,a=[],s=e=0,t=i.length;e<t;s=++e)i[s],a.push(this.calc.range.month[1-s%2]);return a}.call(this))[1]=null),p=0,n=0,h=y.length;n<h;n++)p+=y[n];for(b.month={},l=0,d=j.length;l<d;l++)v=j[l],(e=Array.from(y))[s=y.indexOf(null)]=v-p,b.month[v]=e;for(M=z(b.year),g=M[M.length-1],g=c(g,t),r.call(this,"msec",{period:g}),m={},x=0,u=j.length;x<u;x++)v=j[x],m[Math.floor(t*v)]=z(b.month[v]);return this.table={range:b,msec:{year:M,month:m}}}def_table_by_leap_month(){var e,t,i,s,a,n,r,c,l,o,h,d,u,_,f;for(t=this.calc.msec.day,_=function(e){var i,s,a,n,r;for(n=0,r=[],s=0,a=e.length;s<a;s++)i=e[s],r.push(n+=i*t);return r},f=this.calc.range.year,({month_divs:l}=this.dic),o=0,i=0,a=l.length;i<a;i++)o+=l[i];for(d={month:{}},s=0,n=f.length;s<n;s++)u=f[s],(e=Array.from(l))[l.indexOf(0)]=u-o,d.month[u]=e;for(c={},h=0,r=f.length;h<r;h++)u=f[h],c[Math.floor(t*u)]=_(d.month[u]);return this.table={range:d,msec:{month:c}}}def_table_by_season(){return this.table={range:{},msec:{}}}def_table(){return this.is_table_leap?this.def_table_by_leap_day():this.is_table_month?this.def_table_by_leap_month():this.def_table_by_season()}def_idx(){var e,t,i,s,a,n,r,c;return this.is_table_leap&&(i=this.dic.leaps,[t]=_.call(i,-1),this.calc.divs.period=t),(e=this.index(...this.dic.start)).Z=1*this.dic.Z.length/8,c=(s=(t||0)*e.p+e.y)-e.f,a=s-e.c,n=s-e.b,r=s-e.a,Object.assign(this.calc.zero,{year10:a,year12:n,year60:r,year_s:c}),Object.assign(this.calc.idx,e)}def_zero(){var e,t,i,s,a,n,r,c,l,o,h,u,_,f,y,p,g,x,b,w,v,z;return z=(e,t)=>0-this.calc.idx[e]*this.calc.msec[t],x=this.calc.msec.day*(this.dic.geo[2]||this.dic.geo[1])/360,this.dic.x.tempo=w=d(this.calc.msec.hour/4,-this.calc.msec.hour/8,x),w.now_idx/=4,t=(g=this.dic.start[2])-w.center_at+z("s","second")+z("m","minute")+z("H","hour")+z("d","day"),y=this.dic.sunny[1]+z("Z","season"),({since:p}=d(this.calc.msec.year,g,y)),y=p+z("y","year"),this.is_table_leap&&(v=Math.floor(this.calc.msec.day*this.table.range.year[m(this.calc.idx.y,this.calc.divs.period)]),_=t+-(this.table.msec.month[v][this.calc.idx.M-1]||0)+-(this.table.msec.year[this.calc.idx.y-1]||0)+z("p","period"),y+=z("p","period")),c=(null!=(f=this.dic.eras[0])?f[1]:void 0)||Infinity,this.calc.eras=[],this.is_table_leap?_<c&&(c=_+this.table.msec.year[0],this.calc.eras=[[this.dic.era,c,1]]):y<c&&(c=y+this.calc.msec.year,this.calc.eras=[[this.dic.era,c,1]]),this.dic.moony&&(u=0-this.dic.moony[1]),r=t+w.center_at,e=d(this.calc.msec.day,t,-2108668032e5).center_at,l=d(this.calc.msec.day,r,-2108668032e5).center_at,o=d(this.calc.msec.day,r,-122193792e5).last_at,h=d(this.calc.msec.day,r,-35067168e5).last_at,n=t+z("F","day"),b=t+z("E","day"),i=t+z("C","day"),s=t+z("B","day"),a=t+z("A","day"),Object.assign(this.calc.zero,{period:_,era:c,week:b,season:y,moon:u,day:t,jd:l,ld:o,mjd:h,cjd:e,day10:i,day12:s,day60:a,day_s:n})}precision(){var e,t,i,s,a,n,r,c;if(s=function(e,t){return t===Math.floor(t/e)*e},t=[this.calc.msec.year/this.calc.msec.day-this.calc.range.year[0]],this.dic.leaps)for(i=a=0,n=(r=this.dic.leaps).length;a<n;i=++a)c=r[i],e=t[t.length-1],1&i?e+=1/c:e-=1/c,t.push(e);return{year:[[this.dic.M.length],this.calc.range.month],day:[this.calc.range.hour,this.calc.range.minute,this.calc.range.second],leap:t.map(e=>parseInt(1/e)),is_legal_solor:s(4,this.dic.H.length),is_legal_eto:s(this.dic.c.length,this.dic.a.length)&&s(this.dic.b.length,this.dic.a.length),is_legal_ETO:s(this.dic.C.length,this.dic.A.length)&&s(this.dic.B.length,this.dic.A.length)}}noon(e,{last_at:t,center_at:i}=d(this.calc.msec.day,this.calc.zero.day,e)){var s,a,n,r,c,l,o,h,u;return({sin:c,PI:s}=Math),h=i+(o=2*(r=this.calc.msec.day/360)*c((l=2*s/this.calc.msec.year)*(a=d(this.calc.msec.year,this.calc.zero.season,e)).since)+2.5*r*c(l*a.since*2+.4*s)),u=t+o,{T0:a,T1:n=d(this.calc.msec.year,this.dic.sunny[1],h),"季節":n.since*l,"南中差分":o,"南中時刻":h,"真夜中":u}}solor(e,t=2,{"季節":i,"南中時刻":s,"真夜中":a}=this.noon(e)){var n,r,c,l,o,h,d,u,_,f,m,y,p,g,x;return d=[6,-.3,-50/60,-6,-7.36,-12,-18],({asin:l,acos:c,atan:o,sin:m,cos:h,tan:y,PI:r}=Math),u=2*r/360,f=this.calc.msec.day/(2*r),x=d[t]*u,n=this.dic.earthy[2]*u,_=this.dic.geo[0]*u,g=l(m(n)*m(i)),o(y(i)*h(n)),{K:n,lat:_,"時角":p=c((m(x)-m(_)*m(g))/(h(_)*h(g))),"方向":c((h(_)*m(g)-m(_)*h(g)*h(p))/h(x)),"高度":x,"真夜中":a,"日の出":Math.floor(s-p*f),"南中時刻":s,"日の入":Math.floor(s+p*f)}}to_tempo_by_solor(e,t){var i,s,a,n,r,c,l,o,h,d,_,f,m,y,p,g;for(({"日の出":g,"南中時刻":y,"日の入":p}=this.solor(e,4,this.noon(e,t))),f=this.dic.H.length/4,a=[],r=0,n=(g-t.last_at)/f,i=0,l=1*f;0<=l?i<l:i>l;0<=l?++i:--i)r+=n,a.push(Math.floor(r));for(r=g-t.last_at,n=(p-g)/(2*f),s=o=1*f,h=3*f;o<=h?s<h:s>h;o<=h?++s:--s)r+=n,a.push(Math.floor(r));for(r=t.size,n=(t.next_at-p)/f,m=[],c=d=3*f,_=4*f;d<=_?c<_:c>_;d<=_?++c:--c)m.push(Math.ceil(r)),r-=n;return a.push(...m.reverse()),u(a,t.last_at,e)}"雑節"({Zz:e,u:t,d:i}){var s,n,r,c,l,o,h,u,_,f,y,p,g,x,b,w,v,z,M,j,D,C,E,A,B,O,$,k,H,Z,F,S,G,N;return s=i.dup(e.zero),[F,o,z,p,x,Z,w,B,G,A,_,H,y,M,S]=[1/8,80/360,.25,100/360,.325,3/8,.5,.575,5/8,.75,.825,7/8,1,1.075,9/8].map(t=>{var a;return a=e.last_at+(t-1/8)*e.size,d(i.size,s.last_at,a)}),[h,l,c]=[88,210,220].map(e=>F.succ(e-1)),[j,O]=[z,A].map(e=>a.join(e.back(3),e.succ(3))),[D,$]=[z,A].map(e=>{var t;return(t=d(this.calc.msec.day,this.calc.zero.day10,e.write_at)).now_idx=m(t.now_idx,this.dic.C.length),t.slide(this.dic.C.length/2-t.now_idx-1)}),v=a.join(F,x.back()),b=Z.back(),g=a.join(Z,B.back()),k=G.back(),E=a.join(G,_.back()),f=H.back(),u=a.join(H,M.back()),N=C=S.back(),x=a.join(x,b),B=a.join(B,k),_=a.join(_,f),M=a.join(M,S),(r={"立春":F,"立夏":Z,"立秋":G,"立冬":H,"冬至":y,"春分":z,"夏至":w,"秋分":A,"入梅":o,"半夏生":p,"春":v,"夏":g,"秋":E,"冬":u,"春社日":D,"秋社日":$,"春土用":M,"夏土用":x,"秋土用":B,"冬土用":_,"春節分":C,"夏節分":b,"秋節分":k,"冬節分":f,"節分":N,"春彼岸":j,"秋彼岸":O,"八十八夜":h,"二百十日":l,"二百二十日":c}).covers=function(){var e;for(n in e=[],r)r[n].is_cover(i.center_at)&&e.push(n.match(/.(彼岸|社日|節分|土用)|(.+)/).slice(1).join(""));return e}(),r}to_tempos(e){var t,i,s,a,n,r,c,l,o,h,_,f,y,p,g,x,b,w,v,z,M,j,D,C,E,A,B,O,$,k,H,Z,F,S,G,N,P,T,J,I;switch(C=(t,i,s=e)=>{var a,n,r,c;return(c=(null!=(n=this.table.msec[i])?n[t.size]:void 0)||n)?r=u(c,t.last_at,s):(a=this.calc.msec[i],(r=d(a,t.last_at,s)).length=t.size/r.size),r.path=i,r},S=(t,i=e)=>d(this.calc.msec[t],this.calc.zero[t],i),G=(e,t)=>e.floor(this.calc.msec[t],this.calc.zero[t]),o=d(this.calc.msec.day,this.calc.zero.jd,e),x=C(v=d(this.calc.msec.year,this.calc.zero.season,e),"season"),G(S("moon",v.last_at+this.calc.msec.season),"day"),_=C(f=G(f=S("moon"),"day"),"day"),b=C(v,"season",f.last_at),f.is_cover(b.moderate_at)||(b=C(v,"season",f.next_at),f.is_cover(b.moderate_at)||(f.is_leap=!0)),b.now_idx>>1){case-1:w=v.dup(b.last_at);break;case this.dic.Z.length>>1:w=v.dup(b.next_at);break;default:w=v}for(O in f.now_idx=m(b.now_idx,this.dic.Z.length)>>1,this.is_table_leap?((N=C(k=S("period"),"year")).now_idx+=k.now_idx*this.calc.divs.period,h=C(N,"month"),D=C(h,"day")):(N=w,h=f,D=_.dup(e)),c={},this.dic.is_solor?(F=(l=this.to_tempo_by_solor(e,D)).size/this.dic.m.length,$=d(F,l.last_at,e),Z=d(1e3,$.last_at,e)):(l=C(D,"hour"),$=C(l,"minute"),Z=C($,"second")),p={now_idx:(e-Z.last_at)/1e3},null!=this.table.msec.era&&(A=u(this.table.msec.era,this.calc.zero.era,e),(null!=(E=this.calc.eras[A.now_idx])?E[0]:void 0)&&(N.now_idx+=1-E[2],c.label=E[0])),(I=Object.assign({},N)).now_idx<1&&(c.label="紀元前",I.now_idx=1-I.now_idx),J=this.dic.x.tempo,T=C(S("week",N.last_at),"week"),a=C(N,"day"),g={now_idx:N.now_idx},N.next_at<T.next_at&&(g.now_idx+=1,T.now_idx=0),z={now_idx:m(N.now_idx-this.calc.zero.year60,this.dic.a.length)},M={now_idx:m(N.now_idx-this.calc.zero.year12,this.dic.b.length)},j={now_idx:m(N.now_idx-this.calc.zero.year10,this.dic.c.length)},B={now_idx:m(N.now_idx-this.calc.zero.year_s,this.dic.f.length)},y={now_idx:Math.floor(4*h.now_idx/this.dic.M.length)},t=d(this.calc.msec.day,this.calc.zero.day60,e),i=d(this.calc.msec.day,this.calc.zero.day12,e),s=d(this.calc.msec.day,this.calc.zero.day10,e),n=d(this.calc.msec.day,this.calc.zero.week,e),r=d(this.calc.msec.day,this.calc.zero.day_s,e),t.now_idx=m(t.now_idx,this.dic.A.length),i.now_idx=m(i.now_idx,this.dic.B.length),s.now_idx=m(s.now_idx,this.dic.C.length),r.now_idx=m(r.now_idx,this.dic.F.length),this.is_table_leap?n.now_idx=m(n.now_idx,this.dic.E.length):n.now_idx=m(h.now_idx+D.now_idx,this.dic.E.length),H={Zz:v,A:t,B:i,C:s,D:a,E:n,F:r,G:c,H:l,J:o,M:h,N:_,Q:y,S:p,Y:g,Z:x,a:z,b:M,c:j,d:D,f:B,m:$,p:k,s:Z,u:N,w:T,x:J,y:I})(P=H[O])&&this.dic[O]&&(P.list=this.dic[O].list,P.to_label=this.dic[O].to_label);return H}index(e,t="y年M月d日"){var i,s,a,n,r,c,l,h,d,u,_,f,m,y,p;for(r=null,(()=>{var e,t,i,s,a,n,c,l,o,h,d,u,_,f,m,y,p,g,x,b,w,v,z,M,j,D;e=t=i=s=a=n=c=l=o=h=d=u=_=f=m=y=p=g=x=b=w=v=z=M=j=D=0,r={A:e,B:t,C:i,D:s,E:a,F:n,G:c,H:l,J:o,M:h,N:d,Q:u,S:_,Y:f,Z:m,a:y,b:p,c:g,d:x,f:b,m:w,p:v,s:z,u:M,w:j,x:D,y:0}})(),y=t.match(o),_=this.regex(y),u=h=0,d=(l=e.match(_).slice(1)).length;h<d;u=++h)if(f=l[u],m=y[u][0],c=this.dic[m])switch(p=c.to_idx(f),r[m]=p,m){case"a":[,n,a]=f.match(this.regex(["c","b"])),r.c=this.dic.c.to_idx(n),r.b=this.dic.b.to_idx(a);break;case"A":[,s,i]=f.match(this.regex(["C","B"])),r.C=this.dic.C.to_idx(s),r.B=this.dic.B.to_idx(i)}return this.is_table_leap&&(r.p=Math.floor(r.y/this.calc.divs.period),r.y=r.y-r.p*this.calc.divs.period),r}regex(e){var t;return t="^"+e.map(e=>{var t;return(t=this.dic[e[0]])?t.regex:`(${e.replace(/([\\\[\]().*?])/g,"\\$1")})`}).join(""),new RegExp(t)}tempo_list(e,t){var i,s,a,n,r,c,l,o,h,d,u,_,f;switch(t[0]){case"G":throw new Error(`request token can't tempos. [${t}]`)}if(!(_=e[t[0]]))throw new Error(`request token can't tempos. [${t}]`);if(({table:u,length:r,now_idx:o,last_at:a,size:d,zero:f}=_),c=[],u)for(a=f,o=i=0,n=u.length;i<n;o=++i)l=u[o],d=(l+=f)-a,c.push({now_idx:o,size:d,last_at:a,next_at:l,last_time:new Date(a),next_time:new Date(l)}),a=l;if(r)for(a-d*o,o=s=0,h=r;0<=h?s<h:s>h;o=0<=h?++s:--s)a=(o+0)*d+f,l=(o+1)*d+f,c.push({now_idx:o,size:d,last_at:a,next_at:l,last_time:new Date(a),next_time:new Date(l)});return c}ranges(e,t){return this.tempo_list(this.to_tempos(e),t)}parse(e,t="y年M月d日"){var i,s,a,n,r,c,l,o,h,d,u;return({G:i,p:o,y:d,M:n,d:c,H:s,m:l,s:h,S:r,J:a}=this.index(e,t)),d+=this.calc.eras[i][2]-1,a?this.calc.zero.jd+a*this.calc.msec.day:c*this.calc.msec.day+s*this.calc.msec.hour+l*this.calc.msec.minute+h*this.calc.msec.second+r+(this.is_table_leap?(u=Math.floor(this.calc.msec.day*this.table.range.year[d]),this.calc.zero.period+o*this.calc.msec.period+(this.table.msec.year[d-1]||0)+(this.table.msec.month[u][n-1]||0)):this.calc.zero.season+d*this.calc.msec.year+n*this.calc.msec.month)}format_by(e,t="Gy年M月d日(E)H時m分s秒"){return t.match(o).map(t=>{var i;return null!=(null!=(i=e[t[0]])?i.to_label:void 0)?i.to_label(t.length):t}).join("")}format(e,t){return this.format_by(this.to_tempos(e),t)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=b("1s"),a=b("1m"),n=b("1h"),r=b("1d"),c=b("1w"),l=b("30d"),o=b("1y"),h=0xfffffffffffff,d="undefined"!=typeof window&&null!==window?a*(new Date).getTimezoneOffset():b("-9h"),u=-new Date(0).getDay()*r+d,_=[["年","y",o],["週","w",c],["日","d",r],["時","h",n],["分","m",a],["秒","s",s]],f=[-h,2147483647,o,"？？？"],m=[1/0,2147483647,h,"昔"],y=[f,[-o,2147483647,o,"%s年後"],[-l,2147483647,l,"%sヶ月後"],[-c,c,c,"%s週間後"],[-r,r,r,"%s日後"],[-n,n,n,"%s時間後"],[-a,a,a,"%s分後"],[-25e3,s,s,"%s秒後"],[25e3,25e3,25e3,"今"],[a,s,s,"%s秒前"],[n,a,a,"%s分前"],[r,n,n,"%s時間前"],[c,r,r,"%s日前"],[l,c,c,"%s週間前"],[o,2147483647,l,"%sヶ月前"],[h,2147483647,o,"%s年前"],m];class p{constructor(e,t,i,s,a,n=null){n&&(this.table=n),this.zero=e,this.write_at=i,this.now_idx=t,this.last_at=s,this.next_at=a}get size(){return this.next_at-this.last_at}get since(){return this.write_at-this.last_at}get remain(){return this.next_at-this.write_at}get timeout(){return this.next_at-this.write_at}get center_at(){return(this.next_at+this.last_at)/2}get moderate_at(){return 1&this.now_idx?this.last_at:this.next_at}get deg(){return`${Math.floor(360*this.since/this.size)}deg`}ceil(e,t,i=g){let{last_at:s,write_at:a,next_at:n,now_idx:r,size:c,zero:l}=this;const o=i(e,t,s);if(a<o.next_at){const a=i(e,t,s-c);n=o.next_at,s=a.next_at,r--}else{n=i(e,t,n).next_at,s=o.next_at}return new p(l,r,a,s,n)}floor(e,t,i=g){let{last_at:s,write_at:a,next_at:n,now_idx:r,size:c,zero:l}=this;const o=i(e,t,n);if(o.last_at<=a){const a=i(e,t,n+c);s=o.last_at,n=a.last_at,r++}else{s=i(e,t,s).last_at,n=o.last_at}return new p(l,r,a,s,n)}is_cover(e){return this.last_at<=e&&e<this.next_at}upto(e,t){let i=this,s=null;for(;i.last_at<e.last_at;)t(i),s=i,i=i.succ();return s}succ(e=1){return this.slide(+e)}back(e=1){return this.slide(-e)}slide(e){if(this.table){const t=this.now_idx+e,i=t%this.table.length,s=Math.floor(t/this.table.length)-Math.floor(this.now_idx/this.table.length),a=s?this.table[this.table.length-1]*s:0,n=this.zero+a+(this.table[i-1]||0),r=this.zero+a+this.table[i],c=n+this.since;return new p(this.zero,t,c,n,r,this.table)}{const t=e*this.size;return g(this.size,this.zero,this.write_at+t)}}copy(e=Date.now()){return this.dup(e)}dup(e=Date.now()){return this.table?x(this.table,this.zero,e):g(this.size,this.zero,e)}tick(){const e=Date.now();return this.next_at<=e?this.dup(e):null}sleep(){return p.sleep([this])}static join(e,t){if(e.zero!=t.zero)throw new Error("can't join.");const i=Math.min(e.last_at,t.last_at);return g(Math.max(e.next_at,t.next_at)-i,i,(e.write_at+t.write_at)/2)}static async sleep(e){if(e&&e.length){const t=e.reduce((e,t)=>e.timeout<t.timeout?e:t,{timeout:1/0});if(t.timeout<1/0)return new Promise(e=>{setTimeout(()=>{e(t)},t.timeout)})}return new Promise(e=>e(null))}}t.Tempo=p;function g(e,t,i){const s=Math.floor((i-t)/e);return new p(t,s,i,(s+0)*e+t,(s+1)*e+t)}function x(e,t,i){let s=i-t;const a=e[e.length-1],n=Math.floor(s/a);n&&(s-=n*a);let r=e.length,c=0,l=t;for(;c<r;){const t=c+r>>>1;l=e[t],l<=s?c=t+1:r=t}const o=t+(e[r-1]||0);return l=t+e[r],r+=n*e.length,new p(t,r,i,o,l,e)}function b(e){return 1e3*w(e)}function w(e){let t=0;return e.replace(/(\d+)([ヵ]?([smhdwy秒分時日週月年])[間]?(半$)?)|0/g,(i,s,a,n,r)=>{let c=Number(s);if(!c)return null;"半"===r&&(c+=.5),t+=c*(()=>{switch(n){case"s":case"秒":return 1;case"m":case"分":return 60;case"h":case"時":return 3600;case"d":case"日":return 86400;case"w":case"週":return 604800;case"y":case"年":return 31556925.147;default:throw new Error(`${e} at ${c}${n}`)}})()}),t}t.to_tempo=function(e,t="0s",i=Date.now()){return g(b(e),b(t)+u,Number(i))},t.to_tempo_bare=g,t.to_tempo_by=x,t.to_msec=b,t.to_sec=w,t.to_timer=function(e,t=1){let i="";const s=_.length;for(let a=0;a<s;++a){const s=_[a][t],n=_[a][2],r=Math.floor(e/n);r&&(e%=n,i+=`${r}${s}`)}return i},t.to_relative_time_distance=function(e){if(e<-h||h<e||e-0==NaN)return f;const t=y.length;for(let i=0;i<t;++i){const t=y[i];if(e<t[0])return t}return m}},function(e,t,i){"use strict";e.exports={...i(3),...i(0),...i(1)}},function(e,t,i){"use strict";var s,a,n,r,c,l,o,h,d,u,_,f,m,y,p,g,x,b,w,v,z,M,j,D,C,E,A,B,O,$,k,H,Z,F,S,G,N,P,T,J,I,Q,Y,q,R,K,L,U;Object.defineProperty(t,"__esModule",{value:!0}),t.DIC=void 0,({FancyDate:s}=i(0)),w=["九紫火","八白土","七赤金","六白金","五黄土","四緑木","三碧木","二黒土","一白水"],z=["羅睺","土曜","水曜","金曜","日曜","火曜","計都","月曜","木曜"],x=["月","火","水","木","金","土","日"],E=["先勝","友引","先負","仏滅","大安","赤口"],v=["きゅうしか","はっぱくど","しちせききん","ろっぱくきん","ごおうど","しろくもく","さんぺきもく","じこくど","いっぱくすい"],M=["らごう","どよう","すいよう","きんよう","にちよう","かよう","けいと","げつよう","もくよう"],b=["にち","げつ","か","すい","もく","きん","ど"],A=["せんかち","ともびき","せんまけ","ぶつめつ","たいあん","しゃっく"],Q=["朔","既朔","三日月","上弦","上弦","上弦","上弦","上弦","上弦","上弦","上弦","上弦","十三夜","小望月","満月","十六夜","立待月","居待月","臥待月","更待月","下限","下限","下限","下限","下限","下限","下限","下限","晦","晦"],T=["暁九ツ","暁八ツ","暁七ツ","明六ツ","朝五ツ","朝四ツ","昼九ツ","昼八ツ","昼七ツ","暮六ツ","夜五ツ","夜四ツ"],Y=["さく","きさく","みかづき","じょうげん","じょうげん","じょうげん","じょうげん","じょうげん","じょうげん","じょうげん","じょうげん","じょうげん","じゅうさんや","こもちづき","まんげつ","いざよい","たちまちづき","いまちづき","ふしまちづき","ふけまちづき","かげん","かげん","かげん","かげん","かげん","かげん","かげん","かげん","つごもり","つごもり"],J=["ぎょうここのつ","ぎょうやつ","ぎょうななつ","あけむつ","あさいつつ","あさよつ","ひるここのつ","ひるやつ","ひるななつ","くれむつ","よるいつつ","よるよつ"],Z=["睦月","如月","弥生","卯月","皐月","水無月","文月","葉月","長月","神無月","霜月","師走"],j=["立春","雨水","啓蟄","春分","清明","穀雨","立夏","小満","芒種","夏至","小暑","大暑","立秋","処暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至","小寒","大寒"],F=["むつき","きさらぎ","やよい","うづき","さつき","みなつき","ふみつき","はつき","ながつき","かんなづき","しもつき","しわす"],D=["りっしゅん","うすい","けいちつ","しゅんぶん","せいめい","こくう","りっか","しょうまん","ぼうしゅ","げし","しょうしょ","たいしょ","りっしゅう","しょしょ","はくろ","しゅうぶん","かんろ","そうこう","りっとう","しょうせつ","たいせつ","とうじ","しょうかん","だいかん"],k=["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],O=["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],H=["きのえ","きのと","ひのえ","ひのと","つちのえ","つちのと","かのえ","かのと","みずのえ","みずのと"],$=["ね","うし","とら","う","たつ","み","うま","ひつじ","さる","とり","いぬ","い"],o=[618192e3,0],m=[1579245120,0],G=[[31556925147,155311908e4],I=[2551442889,157731036e4],[864e5,0,23.4397],P=[35,135]],L=[[59355616881,15406848e5],null,[88740035,0,25.19],[35,0]],R=[[7596288e3,155311908e4],null,[15192576e3,0,.01],[35,0]],U=[[19414456423,155311908e4],null,[10087251840,0,-2.64],[35,0]],q=[[374322050280,155311908e4],c=[1441929600,0],[35769600,0,3.12],[35,0]],S=[[931964092416,155311908e4],d=[1377684374,0],[37920035,0,25.33],[35,0]],N=[[2658822788376,155311908e4],u=[752198400,0],[62061120,0,-82.23],[35,0]],K=[[5200376904e3,155311908e4],f=[507733056,0],[648e5,0,28.32],[35,0]],B=[[7818100727754,0],l=[55188e4,0],[551856672,0,-60.41],[35,0]],h=[[145423814400,0],null,[32667012,0,4],[35,0]],y=[[8908394904e3,0],p=[4273516800,0],[14095440,0,0],[35,0]],g=[[963926892e4,0],null,[27975600,0,0],[35,0]],r=[[17610403104e3,0],_=[1362700800,0],[9324e4,0,0],[35,0]],(C=[["大化",-417956868e5],["白雉",-416480292e5],["朱鳥",-404994276e5],["大宝",-400349412e5],["慶雲",-399364452e5],["和銅",-398214468e5],["霊亀",-395799588e5],["養老",-395097156e5],["神亀",-393143652e5],["天平",-391407876e5],["天平感宝",-3852009e7],["天平勝宝",-385108452e5],["天平宝字",-382568292e5],["天平神護",-380231172e5],["神護景雲",-379406916e5],["宝亀",-378425412e5],["天応",-375183684e5],["延暦",-374658372e5],["大同",-367183044e5],["弘仁",-365804964e5],["天長",-361606788e5],["承和",-358445412e5],["嘉祥",-353895588e5],["仁寿",-352988388e5],["斉衡",-351864324e5],["天安",-351157572e5],["貞観",-350474148e5],["元慶",-34478298e6],["仁和",-34232922e6],["寛平",-340997796e5],["昌泰",-338166468e5],["延喜",-337130532e5],["延長",-330269508e5],["承平",-327756132e5],["天慶",-325514916e5],["天暦",-32270778e6],["天徳",-319387428e5],["応和",-318350628e5],["康保",-317259396e5],["安和",-315979812e5],["天禄",-315459684e5],["天延",-314289828e5],["貞元",-313479396e5],["天元",-312725988e5],["永観",-311334948e5],["寛和",-310712004e5],["永延",-31009338e6],["永祚",-309351204e5],["正暦",-308969316e5],["長徳",-307604196e5],["長保",-30638682e6],["寛弘",-30464586e6],["長和",-301962276e5],["寛仁",-300611844e5],["治安",-2994057e7],["万寿",-298324836e5],["長元",-297063396e5],["長暦",-294310692e5],["長久",-293172804e5],["寛徳",-2919105e7],["永承",-291459492e5],["天喜",-28934442e6],["康平",-2875689e7],["治暦",-285372612e5],["延久",-284214852e5],["承保",-282522276e5],["承暦",-281506212e5],["永保",-28046682e6],["応徳",-279525924e5],["寛治",-278530596e5],["嘉保",-2760993e7],["永長",-275484996e5],["承徳",-275175684e5],["康和",-274633956e5],["長治",-273220452e5],["嘉承",-272532708e5],["天仁",-271798308e5],["天永",-271202148e5],["永久",-270233604e5],["元永",-268761348e5],["保安",-268117668e5],["天治",-266847588e5],["大治",-266296356e5],["天承",-26470746e6],["長承",-264214116e5],["保延",-263357028e5],["永治",-261407844e5],["康治",-261161604e5],["天養",-260580132e5],["久安",-260146404e5],["仁平",-258408036e5],["久寿",-25720794e6],["保元",-256749156e5],["平治",-255810852e5],["永暦",-255564612e5],["応保",-255060036e5],["長寛",-254552868e5],["永万",-25385994e6],["仁安",-253483236e5],["嘉応",-252657252e5],["承安",-252008388e5],["安元",-2506761e7],["治承",-250033284e5],["養和",-248774436e5],["寿永",-248508324e5],["元暦",-247905252e5],["文治",-247499172e5],["建久",-246021732e5],["正治",-243175716e5],["建仁",-242600292e5],["元久",-241649892e5],["建永",-240955236e5],["承元",-24049818e6],["建暦",-239414724e5],["建保",-23854986e6],["承久",-23686074e6],["貞応",-235915524e5],["元仁",-23509386e6],["嘉禄",-234965988e5],["安貞",-234132228e5],["寛喜",-233753796e5],["貞永",-23278698e6],["天福",-232443972e5],["文暦",-231967908e5],["嘉禎",-231675012e5],["暦仁",-230677092e5],["延応",-23061402e6],["仁治",-230172516e5],["寛元",-229347396e5],["宝治",-22806954e6],["建長",-227414628e5],["康元",-22505418e6],["正嘉",-224917668e5],["正元",-224269668e5],["文応",-223924068e5],["弘長",-22366314e6],["文永",-222711876e5],["建治",-219192804e5],["弘安",-2182977e7],["正応",-21508362e6],["永仁",-213419556e5],["正安",-211616388e5],["乾元",-210497508e5],["嘉元",-210255588e5],["徳治",-209201508e5],["延慶",-208619172e5],["応長",-207836388e5],["正和",-207537444e5],["文保",-205996068e5],["元応",-205310916e5],["元亨",-20472858e6],["正中",-203541444e5],["嘉暦",-203093028e5],["元徳",-202044996e5],["元弘",-20142378e6],["正慶",-20120346e6],["建武",-200640996e5],["延元",-199977444e5],["興国",-198677124e5],["正平",-19657674e6],["建徳",-189138564e5],["文中",-188599428e5],["天授",-187604964e5],["弘和",-185807844e5],["元中",-184797828e5],["暦応",-199188612e5],["康永",-198040356e5],["貞和",-196949124e5],["観応",-19556586e6],["文和",-19474938e6],["延文",-193650372e5],["康安",-192068388e5],["貞治",-191614788e5],["応安",-189909252e5],["永和",-18768186e6],["康暦",-186410052e5],["永徳",-185795748e5],["至徳",-184849668e5],["嘉慶",-183730788e5],["康応",-183282372e5],["明徳",-182935908e5],["応永",-181576836e5],["正長",-170892612e5],["永享",-170477892e5],["嘉吉",-166869828e5],["文安",-165936708e5],["宝徳",-164207844e5],["享徳",-163266084e5],["康正",-162296676e5],["長禄",-161630532e5],["寛正",-160590276e5],["文正",-158977188e5],["応仁",-158639364e5],["文明",-15795594e6],["長享",-152222436e5],["延徳",-15155802e6],["明応",-150641316e5],["文亀",-147928356e5],["永正",-14698314e6],["大永",-14145354e6],["享禄",-139261572e5],["天文",-138003588e5],["弘治",-130685508e5],["永禄",-12994074e6],["元亀",-126093348e5],["天正",-125068644e5],["文禄",-118961892e5],["慶長",-117721188e5],["元和",-11181402e6],["寛永",-109095012e5],["正保",-102549348e5],["慶安",-101529828e5],["承応",-10009818e6],["明暦",-9928602e6],["万治",-98256996e5],["寛文",-97387812e5],["延宝",-9346266e6],["天和",-90929412e5],["貞享",-9017082e6],["元禄",-88734852e5],["宝永",-8385066e6],["正徳",-81593892e5],["享保",-79964388e5],["元文",-737073e7],["寛保",-7217802e6],["延享",-71238852e5],["寛延",-69869412e5],["宝暦",-68810148e5],["明和",-648513e7],["安永",-6218586e6],["天明",-59543748e5],["寛政",-570753e7],["享和",-5326506e6],["文化",-52315524e5],["文政",-47841732e5],["天保",-43845732e5],["弘化",-39439332e5],["嘉永",-3842154e6],["安政",-3627882e6],["万延",-3462858e6],["文久",-3432186e6],["元治",-33376644e5],["慶応",-33031044e5],["明治",-32167908e5],["大正",-1812186e6],["昭和",-13576356e5],["平成",6001884e5],["令和",15566364e5]]).slice(244);var V={"元号":C,"九星":w,"九曜":z,"七曜":x,"六曜":E,"和風月名":Z,"二十四節季":j,"月相":Q,"時鐘":T,"十干":k,"十二支":O,"九星かな":v,"九曜かな":M,"七曜かな":b,"六曜かな":A,"和風月名かな":F,"二十四節季かな":D,"月相かな":Y,"時鐘かな":J,"十干かな":H,"十二支かな":$,"日本":P,"地球":G,"火星":L,"水星":R,"金星":U,"木星":q,"土星":S,"天王星":N,"海王星":K,"冥王星":B,"セレス":h,"ハウメア":y,"マケマケ":g,"エリス":r,"月":I,"ガニメデ":o,"カリスト":c,"タイタン":d,"チタニア":u,"トリトン":f,"ナマカ":m,"ヒイアカ":p,"カロン":l,"ディスノミア":_};t.DIC=V,s.Gregorian=n=(new s).planet(...G).era("西暦").calendar(["1970年(木) 庚戌-辛巳","y年(E) a-A",0],[4,100,400],[31,null,31,30,31,30,31,31,30,31,30,31]).algo({M:[12],H:[24],m:[60],N:[Q,Y],E:[x,b],Z:[j,D],a:[60],A:[60],B:[O,$],C:[k,H]}).init(),s.Julian=n.dup().calendar(["1582/10/5(金) 壬午-甲戌","y/M/d(E) a-A",n.parse("1582/10/15","y/M/d")],[4],[31,null,31,30,31,30,31,31,30,31,30,31]).init(),s.平気法=n.dup().planet(...G).era("皇紀",C).calendar(["2630年 庚戌-辛巳 三碧木-七赤金","y年 a-A f-F",0]).daily(!0).algo({E:[E,A],M:[Z,F],H:[T,J],m:[["","半"],["","はん"]],f:[w,v],F:[w.reverse(),v.reverse()]}).init(),s.Romulus=(new s).planet(...G).era("ロムルス暦").calendar(["1970年(A)","y年(E)",0],null,[null,31,30,31,30,31,30,30,31,30,30]).algo({M:[11],H:[24],m:[60],N:[Q,Y],E:["ABCDEFGH",null],Z:[j,D]}).init(),a=[[315569251.47,new Date("2019/03/21 06:58").getTime()/100],[25514428.896,new Date("2019/01/06 10:28").getTime()/100],[864e3,0,23.4397],P],s.Fast=n.dup().planet(...a).era("fast",C).init(),s.MarsGregorian=n.dup().planet(...L).era("西暦").calendar(["1年(火) 壬子-辛巳","y年(E) a-A",n.parse("0年4月1日")],[1,7,70]).algo({M:[20]}).init(),s.JupiterGregorian=n.dup().planet(...q).era("西暦").calendar(["1年(火) 壬子-辛巳","y年(E) a-A",n.parse("0年4月1日")]).algo({H:[10],M:[320],Z:[640]}).init()},function(e,t){e.exports=require("lodash")}])}));
//# sourceMappingURL=index.min.js.map